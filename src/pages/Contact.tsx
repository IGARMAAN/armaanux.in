import { useState } from "react";
import emailjs from "@emailjs/browser";

export const Contact = () => {
    const [name, setName] = useState("");
    const [email, setEmail] = useState("");
    const [message, setMessage] = useState("");
    const [formStatus, setFormStatus] = useState<"success" | "error" | "idle">("idle");
    const [loading, setLoading] = useState(false);

    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {
        e.preventDefault();
        setLoading(true);
        setFormStatus("idle");

        const serviceId = import.meta.env.VITE_EMAILJS_SERVICE_ID!;
        const templateId = import.meta.env.VITE_EMAILJS_TEMPLATE_ID!;
        const publicKey = import.meta.env.VITE_EMAILJS_PUBLIC_KEY!;

        if (!serviceId || !templateId || !publicKey) {
            console.error("Missing EmailJS environment variables");
            setFormStatus("error");
            setLoading(false);
            return;
        }

        const templateParams = {
            from_name: name,
            from_email: email,
            message: message,
        };

        try {
            await emailjs.send(serviceId, templateId, templateParams, publicKey);
            setFormStatus("success");
            setName("");
            setEmail("");
            setMessage("");
        } catch (error) {
            console.error("Error sending email:", error);
            setFormStatus("error");
        }
        setLoading(false);
        setTimeout(() => setFormStatus("idle"), 2000);
    };

    return (
        <section
            id="contact"
            className="w-full px-5 md:px-20 space-y-5 container py-14 pt-0 sm:py-32 relative text-white"
        >
            <h1 className="text-2xl md:text-3xl font-heading text-white">
                Contact me
            </h1>
            <p>
                Got a project in mind or just want to say hello? Feel free to reach out.
                I'd love to hear from you :)
            </p>
            <form onSubmit={handleSubmit} className="flex flex-col w-full gap-4">
                <div className="w-full flex flex-col gap-2">
                    <label htmlFor="name">Name</label>
                    <input
                        type="text"
                        id="name"
                        placeholder="Enter your full name"
                        className="bg-transparent border-2 border-white p-3 rounded focus:outline-none focus:border-gray-600 transition-all"
                        value={name}
                        onChange={(e) => setName(e.target.value)}
                        required
                    />
                </div>
                <div className="w-full flex flex-col gap-2">
                    <label htmlFor="email">Email</label>
                    <input
                        type="email"
                        id="email"
                        placeholder="Enter your email address"
                        className="bg-transparent border-2 border-white p-3 rounded focus:outline-none focus:border-gray-600 transition-all"
                        value={email}
                        onChange={(e) => setEmail(e.target.value)}
                        required
                    />
                </div>
                <div className="w-full flex flex-col gap-2">
                    <label htmlFor="message">Message</label>
                    <textarea
                        id="message"
                        rows={6}
                        placeholder="Tell me about your project or drop a quick message..."
                        className="bg-transparent border-2 border-white p-3 rounded resize-none focus:outline-none focus:border-gray-600 transition-all"
                        value={message}
                        onChange={(e) => setMessage(e.target.value)}
                        required
                    />
                </div>
                <div className="flex flex-col md:flex-row md:justify-between md:items-center gap-5">
                    <span className="flex flex-row justify-between items-center gap-2">
                        <Exclamationsvg />
                        Your information is safe and stay private, always.
                    </span>
                    <button
                        type="submit"
                        className={`w-40 h-12 flex items-center justify-center text-black text-base p-3 rounded cursor-pointer transition-all ${formStatus === "success"
                            ? "bg-green-500 text-white"
                            : formStatus === "error"
                                ? "bg-red-500 text-white"
                                : "bg-white hover:bg-gray-200"
                            }`}
                        disabled={loading}
                    >
                        {loading
                            ? "Sending..."
                            : formStatus === "success"
                                ? "Sent!"
                                : formStatus === "error"
                                    ? "Try Again"
                                    : "Send Message"}
                    </button>

                </div>
            </form>
            <div className="absolute right-9 bottom-10 -z-50">
                <Sphericalsvg />
            </div>
        </section>
    );
};


const Exclamationsvg = () => {
    return (
        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 26.5625C21.3858 26.5625 26.5625 21.3858 26.5625 15C26.5625 8.61421 21.3858 3.4375 15 3.4375C8.61421 3.4375 3.4375 8.61421 3.4375 15C3.4375 21.3858 8.61421 26.5625 15 26.5625Z" stroke="white" strokeWidth="1.5" />
            <path d="M15 14.7662V21.0162" stroke="white" strokeWidth="1.5" strokeLinecap="round" />
            <path d="M15 12.11C15.8629 12.11 16.5625 11.4104 16.5625 10.5475C16.5625 9.68454 15.8629 8.98499 15 8.98499C14.1371 8.98499 13.4375 9.68454 13.4375 10.5475C13.4375 11.4104 14.1371 12.11 15 12.11Z" fill="white" />
        </svg>

    )
}

const Sphericalsvg = () => {
    return (
        <svg width="644" height="725" viewBox="0 0 844 925" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M83.2852 275.029C79.8865 279.657 76.7749 284.505 73.9501 289.596C28.8633 242.744 17.0342 190.735 40.67 143.112C46.1872 133.746 54.1985 121.625 60.3116 112.612C27.8704 156.357 35.7267 223.483 83.2852 275.029Z" fill="white" fillOpacity="0.01" />
            <path d="M63.7098 312.14C61.6574 317.804 59.87 323.688 58.3693 329.748C17.8508 298.301 1.47583 256.539 10.524 220.111L10.6782 219.538C13.2823 209.754 17.4317 196.862 20.5435 187.231C5.97797 226.745 20.83 275.271 63.7098 312.14Z" fill="white" fillOpacity="0.01" />
            <path d="M53.6689 356.127C52.9185 362.65 52.4327 369.35 52.212 376.159C16.7252 355.312 -0.973816 326.266 0.0413208 297.617L0.615173 285.497L2.42444 265.112C-1.41559 297.067 16.0414 331.115 53.6689 356.127Z" fill="white" fillOpacity="0.01" />
            <path d="M52.83 405.491C53.3376 412.676 54.11 419.97 55.1252 427.353C24.2509 414.901 7.08112 395.552 4.25629 374.242L1.58606 350.728L0.923889 342.486C2.60114 366.705 20.1459 389.779 52.83 405.491Z" fill="white" fillOpacity="0.01" />
            <path d="M60.8849 458.844C62.6063 466.469 64.5708 474.183 66.7997 481.94C40.0743 476.342 24.4715 464.618 20.3005 449.721C17.6522 440.421 14.7173 427.882 12.3118 418.516C16.218 435.903 32.5485 450.558 60.8849 458.844Z" fill="white" fillOpacity="0.01" />
            <path d="M77.5029 514.71C80.3939 522.599 83.5277 530.511 86.9042 538.422C63.9967 538.687 50.5788 533.199 46.6064 523.789C42.7223 514.666 38.0878 502.303 34.4464 493.091C38.6616 504.661 53.0505 512.616 77.5029 514.71Z" fill="white" fillOpacity="0.01" />
            <path d="M102.352 571.633C106.369 579.566 110.628 587.478 115.108 595.367C95.8643 600.877 85.0288 600.744 82.3806 596.05L66.3143 566.123C69.6026 572.713 81.5856 575.005 102.352 571.633Z" fill="white" fillOpacity="0.01" />
            <path d="M151.147 651.365C135.522 661.832 127.754 666.505 127.335 665.91L123.825 661.017L107.451 637.062C108.885 639.332 118 636.599 135.169 628.181C140.267 635.982 145.608 643.718 151.147 651.365Z" fill="white" fillOpacity="0.01" />
            <path d="M194.556 704.85C182.727 720.342 178.645 729.532 181.381 732.485L168.581 718.028L157.746 705.225C157.106 702.734 161.608 697.115 175.6 682.989C178.446 686.449 181.359 689.864 184.295 693.28C187.715 697.203 191.136 701.059 194.556 704.85Z" fill="white" fillOpacity="0.01" />
            <path d="M241.232 791.281L218.258 770.302L215.721 767.877C210.777 763.139 212.433 751.459 221.944 733.08C228.587 739.471 235.273 745.619 242.027 751.503C234.236 772.042 234.479 785.441 241.232 791.281Z" fill="white" fillOpacity="0.01" />
            <path d="M291.152 789.43C287.82 815.28 293.271 832.624 305.011 840.491C296.735 834.894 286.032 826.916 277.889 821.098C268.377 813.958 265.266 798.245 270.518 774.687C277.381 779.866 284.244 784.78 291.152 789.43Z" fill="white" fillOpacity="0.01" />
            <path d="M340.63 818.299C342.506 849.923 354.468 870.969 372.432 879.74C363.737 875.443 352.416 869.184 343.853 864.622C328.625 856.072 319.577 836.524 319.996 807.391C326.904 811.291 333.789 814.95 340.63 818.299Z" fill="white" fillOpacity="0.01" />
            <path d="M389.248 837.714C397.502 875.795 417.916 900.235 443.582 908.036C434.49 905.238 422.572 900.852 413.59 897.723C379.229 883.839 372.167 846.662 369.144 830.795C375.897 833.373 382.605 835.687 389.248 837.714Z" fill="white" fillOpacity="0.01" />
            <path d="M416.658 844.502C423.102 845.714 429.458 846.64 435.725 847.279C452.145 892.963 484.189 920.025 519.256 923.419L508.575 922.184L487.323 918.813C456.272 913.105 429.436 886.99 416.658 844.502Z" fill="white" fillOpacity="0.01" />
            <path d="M461.303 848.16C467.262 847.94 473.088 847.433 478.804 846.618C505.794 900.764 553.772 928.619 598.969 921.898C591.929 922.912 582.462 923.661 575.4 924.41L565.203 924.939C524.221 926.482 483.527 898.67 461.303 848.16Z" fill="white" fillOpacity="0.01" />
            <path d="M501.844 841.373C507.14 839.676 512.282 837.692 517.248 835.356C560.966 898.472 621.567 921.876 679.366 897.987C669.435 902.329 655.929 907.463 645.755 911.166C620.199 918.416 555.052 926.129 501.844 841.373Z" fill="white" fillOpacity="0.01" />
            <path d="M536.978 823.764C537.507 823.39 538.015 822.993 538.545 822.619C542.429 819.71 546.18 816.558 549.755 813.12C599.432 873.283 688.635 902.879 751.884 848.292C744.602 854.97 734.384 863.344 726.726 869.581L723.217 872.159C668.972 911.386 585.949 889.965 536.978 823.764Z" fill="white" fillOpacity="0.01" />
            <path d="M565.358 795.116C568.713 790.444 571.758 785.552 574.539 780.417C632.602 837.097 723.592 850.188 777.793 809.683C789.512 800.934 798.538 790.378 804.938 778.654C799.531 788.086 791.675 800.295 785.672 809.374C780 817.242 773.027 824.36 764.751 830.53C710.572 871.057 621.281 855.19 565.358 795.116Z" fill="white" fillOpacity="0.01" />
            <path d="M584.536 757.696C586.544 751.988 588.266 746.082 589.722 739.978C651.294 787.293 745.153 792.802 799.355 752.297C818.047 738.325 829.589 720.695 834.157 701.677L833.296 705.225C830.979 714.106 827.227 725.763 824.513 734.512C818.709 750.776 807.895 765.586 792.006 777.442C737.804 817.947 644.916 809.11 584.536 757.696Z" fill="white" fillOpacity="0.01" />
            <path d="M805.732 714.701C751.531 755.206 656.834 754.677 594.224 713.489C594.931 706.943 595.35 700.222 595.526 693.368C658.445 729.885 753.385 726.645 807.586 686.14C831.377 668.356 843.36 646.362 844 624.17L843.338 639.266L841.859 656.565C839.498 677.92 827.558 698.393 805.732 714.701Z" fill="white" fillOpacity="0.01" />
            <path d="M592.282 642.021C654.45 666.637 748.773 653.745 802.974 613.262C830.405 592.767 842.301 569.12 839.3 547.568L842.367 574.057L842.786 579.258C844.463 601.516 832.546 624.854 806.417 644.401C752.216 684.906 657.43 693.677 594.71 663.97C594.158 656.742 593.341 649.425 592.282 642.021Z" fill="white" fillOpacity="0.01" />
            <path d="M785.937 535.645C815.906 513.255 828.022 490.248 822.836 472.133C825.528 481.433 828.552 493.972 831.002 503.338C842.5 570.575 691.592 636.666 586.346 610.485C584.58 602.838 582.55 595.125 580.299 587.345C639.664 599.29 731.735 576.15 785.937 535.645Z" fill="white" fillOpacity="0.01" />
            <path d="M756.938 455.406C788.585 431.76 801.628 411.023 796.133 398.109C800.061 407.232 804.762 419.595 808.447 428.807C814.053 444.057 801.495 465.896 770.466 489.102C716.265 529.607 626.246 558.917 569.375 554.554C566.44 546.664 563.262 538.753 559.841 530.819C614.506 529.651 702.759 495.889 756.938 455.406Z" fill="white" fillOpacity="0.01" />
            <path d="M544.194 497.586C540.133 489.653 535.83 481.741 531.306 473.852C579.35 459.527 662.241 415.078 716.442 374.573C749.104 350.155 763.89 332.767 759.984 325.914L776.205 355.819C780.971 365.273 767.002 384.137 734.715 408.268C680.536 448.751 595.239 488.749 544.194 497.586Z" fill="white" fillOpacity="0.01" />
            <path d="M511.069 441.06C505.927 433.281 500.564 425.568 494.981 417.943C534.616 390.66 610.688 335.698 664.889 295.215C697.904 270.533 715.184 256.914 714.698 256.209L720.15 263.768L734.715 284.99C736.789 288.252 720.613 303.457 687.708 328.051C633.529 368.512 554.434 419.133 511.069 441.06Z" fill="white" fillOpacity="0.01" />
            <path d="M470.351 386.385C468.056 383.63 465.739 380.897 463.378 378.165C459.383 373.559 455.367 369.041 451.328 364.612C480.856 324.988 548.718 260.021 602.919 219.516C635.67 195.033 655.951 185.094 660.343 189.788L675.416 206.712L684.089 216.938C681.882 214.359 662.881 225.775 629.932 250.413C575.73 290.918 504.271 351.786 470.351 386.385Z" fill="white" fillOpacity="0.01" />
            <path d="M423.875 336.602C417.232 330.255 410.523 324.151 403.77 318.311C422.285 267.955 481.209 194.305 535.41 153.8C567.278 129.978 590.406 122.926 600.293 131.388L625.695 154.461L625.871 154.638C618.323 147.431 596.321 155.563 563.946 179.761C509.745 220.266 447.047 290.477 423.875 336.602Z" fill="white" fillOpacity="0.01" />
            <path d="M375.235 295.326C368.371 290.191 361.508 285.32 354.6 280.715C361.728 221.654 411.45 140.93 465.629 100.447C495.929 77.8145 521.198 72.5255 536.382 82.5747C544.68 88.1282 555.405 96.0177 563.548 101.792C550.506 92.095 525.987 97.979 494.914 121.185C440.735 161.668 387.152 239.637 375.235 295.326Z" fill="white" fillOpacity="0.01" />
            <path d="M325.756 262.974C318.87 259.118 311.985 255.526 305.144 252.198C300.818 186.526 341.226 100.469 395.428 59.9642C423.345 39.0946 449.474 34.3785 468.851 43.7004C477.546 47.9316 488.867 54.1242 497.452 58.6199C479.642 48.7471 453.689 53.5734 424.691 75.2363C370.49 115.763 326.175 199.793 325.756 262.974Z" fill="white" fillOpacity="0.01" />
            <path d="M354.997 42.5767C300.796 83.0817 265.728 171.452 276.653 239.945C269.899 237.411 263.213 235.141 256.57 233.18C240.99 163.1 272.305 73.4733 326.506 32.9682C351.025 14.6329 376.051 9.49828 397.524 15.8671L399.179 16.374C407.786 18.9964 419.063 23.0954 427.582 25.9823C406.683 18.2471 380.994 23.1395 354.997 42.5767Z" fill="white" fillOpacity="0.01" />
            <path d="M287.687 23.6463C233.486 64.1514 207.312 155.012 229.227 226.612C222.805 225.444 216.471 224.585 210.226 224.012C183.919 151.817 206.518 60.4711 260.719 19.9661C280.36 5.28904 301.458 -0.705222 321.629 1.05778L335.422 2.57838L353.718 5.42118C332.553 1.67479 309.513 7.33849 287.687 23.6463Z" fill="white" fillOpacity="0.01" />
            <path d="M224.504 19.0405C170.303 59.5456 152.493 151.023 184.714 223.373C178.777 223.637 172.973 224.21 167.302 225.092C131.042 153.139 145.586 61.9917 199.787 21.4866C212.94 11.6579 227.219 5.70766 241.828 3.37168C249.817 2.18165 260.565 1.23409 268.598 0.39666L275.726 0C258.181 0.793353 240.636 6.96391 224.504 19.0405Z" fill="white" fillOpacity="0.01" />
            <path d="M187.517 17.5199C189.988 16.4621 192.504 15.4923 195.042 14.6549C192.68 15.5364 190.121 16.5062 187.517 17.5199Z" fill="white" fillOpacity="0.01" />
            <path d="M144.372 230.557C139.097 232.298 134 234.37 129.078 236.75C83.9693 167.508 91.3402 78.5419 145.541 38.0369C150.661 34.2023 156.024 30.9408 161.563 28.2301C169.155 24.7923 178.821 20.8696 187.517 17.5199C180.499 20.539 173.702 24.4175 167.257 29.2438C113.056 69.7488 102.794 159.883 144.372 230.557Z" fill="white" fillOpacity="0.01" />
            <path d="M109.459 248.606C109.348 248.694 109.26 248.76 109.15 248.848C104.846 252.066 100.719 255.592 96.8132 259.426C47.754 199.704 45.6132 121.956 89.5745 78.9166C97.5855 71.4679 108.775 62.0798 117.249 55.182L117.955 54.6532C117.867 54.7193 117.779 54.7854 117.691 54.8516C63.5117 95.3566 59.8036 182.096 109.459 248.606Z" fill="white" fillOpacity="0.01" />
        </svg>

    )
}